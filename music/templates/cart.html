{% extends 'base.html' %}
{% block content %}
<div class="max-w-4xl mx-auto">
    <h1 class="text-5xl font-bold mb-8 bg-gradient-to-r from-vinyl-purple to-vinyl-teal bg-clip-text text-transparent">
        My Cart
    </h1>

    {% if items %}
        <div class="bg-gray-900 rounded-lg border border-gray-800 divide-y divide-gray-800 mb-8">
            {% for item in items %}
            <div class="p-6 flex items-center gap-6">
                <!-- Album Cover -->
                <div class="w-24 h-24 flex-shrink-0">
                    {% if item.album.cover_image %}
                        <img src="{{ item.album.cover_image.url }}" alt="{{ item.album.title }}" 
                             class="w-full h-full object-cover rounded-lg">
                    {% else %}
                        <img src="/media/no_art.jpg" alt="No Cover" 
                             class="w-full h-full object-cover rounded-lg">
                    {% endif %}
                </div>

                <!-- Album Info -->
                <div class="flex-1">
                    <h3 class="text-xl font-bold text-white">{{ item.album.title }}</h3>
                    <p class="text-gray-400">{{ item.album.artist.name }}</p>
                    <p class="text-sm text-gray-500">{{ item.album.release_date|date:"Y"|default:"" }}</p>
                </div>

                <!-- Quantity (always 1 for physical albums) -->
                <div class="text-gray-400 text-sm">
                    Qty: {{ item.quantity }}
                </div>

                <!-- Remove Button -->
                <form action="{% url 'remove_from_cart' item.id %}" method="post">
                    {% csrf_token %}
                    <button type="submit" 
                            class="bg-red-900 hover:bg-red-800 text-white px-4 py-2 rounded-lg transition-colors">
                        Remove
                    </button>
                </form>
            </div>
            {% endfor %}
        </div>

        <!-- Checkout Button -->
        <div class="flex justify-between items-center">
            <a href="{% url 'collection' %}" class="text-vinyl-teal hover:text-vinyl-purple transition-colors">
                ‚Üê Continue Browsing
            </a>
            <a href="{% url 'checkout' %}" 
               class="bg-gradient-to-r from-vinyl-purple to-vinyl-teal px-8 py-4 rounded-lg text-white font-bold text-lg hover:scale-105 transform transition-all shadow-lg">
                Proceed to Checkout
            </a>
        </div>

    {% else %}
        <div class="bg-gray-900 rounded-lg border border-gray-800 p-12 text-center">
            <p class="text-gray-400 text-xl mb-6">Your cart is empty</p>
            <a href="{% url 'collection' %}" 
               class="inline-block bg-gradient-to-r from-vinyl-purple to-vinyl-teal px-6 py-3 rounded-lg text-white font-bold hover:scale-105 transform transition-all">
                Browse Collection
            </a>
        </div>
    {% endif %}
</div>
{% endblock %}
