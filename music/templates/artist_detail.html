{% extends 'base.html' %}
{% load markdown_extras %}
{% block content %}
<style>
    /* Biography paragraph spacing */
    .prose p {
        margin-bottom: 1rem;
    }
    
    /* Footnote styling */
    .footnote hr {
        border-color: #333;
        margin: 1.5rem 0;
    }
    .footnote ol {
        font-size: 0.85rem;
        color: #9ca3af;
        list-style: decimal;
        padding-left: 2rem;
    }
    .footnote ol li {
        margin-bottom: 0.5rem;
        display: list-item;
    }
    .footnote-ref {
        text-decoration: none;
    }
    .footnote-backref {
        display: none;
    }
</style>
<div class="max-w-7xl mx-auto">
    <!-- Back button -->
    <a href="{% url 'collection' %}" class="inline-block mb-6 text-vinyl-teal hover:text-vinyl-purple transition-colors">
        ‚Üê Back to Collection
    </a>

    <div class="grid grid-cols-1 md:grid-cols-3 gap-8 mb-12">
        <!-- Artist Image -->
        <div class="md:col-span-1">
            <div class="bg-gray-900 rounded-lg overflow-hidden border border-gray-800 p-6">
                {% if artist.image %}
                    <img src="{{ artist.image.url }}" alt="{{ artist.name }}" 
                         class="w-full rounded-lg shadow-2xl grayscale hover:grayscale-0 transition-all duration-300">
                {% else %}
                    <div class="aspect-square bg-gray-800 rounded-lg flex items-center justify-center">
                        <span class="text-6xl">üé§</span>
                    </div>
                {% endif %}
            </div>
            
            {% if artist.website %}
            <div class="mt-4 bg-gray-900 rounded-lg p-4 border border-gray-800">
                <h3 class="text-sm text-gray-400 mb-2">Website</h3>
                <a href="{{ artist.website }}" target="_blank" class="text-vinyl-teal hover:text-vinyl-purple transition-colors break-all">
                    {{ artist.website|cut:"https://"|cut:"http://" }}
                </a>
            </div>
            {% endif %}
        </div>

        <!-- Artist Info -->
        <div class="md:col-span-2">
            <h1 class="text-6xl font-bold mb-6 bg-gradient-to-r from-vinyl-purple to-vinyl-teal bg-clip-text text-transparent">
                {{ artist.name }}
            </h1>
            
            {% if artist.bio %}
            <div class="bg-gray-900 rounded-lg p-6 border border-gray-800">
                <h2 class="text-2xl font-bold mb-4 text-vinyl-teal">Biography</h2>
                <div class="text-gray-300 leading-relaxed prose prose-invert max-w-none">
                    {{ artist.bio|markdown }}
                </div>
            </div>
            {% endif %}
        </div>
    </div>

    <!-- Albums Grid -->
    <div class="mb-8">
        <h2 class="text-3xl font-bold mb-6">Albums</h2>
        <div class="grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-5 gap-6">
            {% for album in artist.albums.all %}
                <div class="group relative bg-gray-900 rounded-lg overflow-hidden border border-gray-800 hover:border-vinyl-purple transition-all duration-300 hover:scale-105 hover:shadow-xl hover:shadow-vinyl-purple/20">
                    <a href="{% url 'album_detail' album.id album.slug %}" class="block">
                        <div class="aspect-square overflow-hidden bg-gray-800">
                            {% if album.cover_image %}
                                <img src="{{ album.cover_image.url }}" alt="{{ album.title }}" 
                                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
                            {% else %}
                                <img src="/media/no_art.jpg" alt="No Cover" 
                                     class="w-full h-full object-cover group-hover:scale-110 transition-transform duration-300">
                            {% endif %}
                        </div>
                        <div class="p-3">
                            <h3 class="font-bold text-white truncate group-hover:text-vinyl-teal transition-colors">{{ album.title }}</h3>
                            <p class="text-xs text-gray-500">{{ album.release_date|date:"Y"|default:"Unknown" }}</p>
                            {% if album.genre %}
                            <p class="text-xs text-gray-400">{{ album.genre.name }}</p>
                            {% endif %}
                        </div>
                    </a>
                </div>
            {% empty %}
                <p class="text-gray-500 col-span-full text-center">No albums found for this artist.</p>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}
